async("polycade.entities.base",["jq","Phaser","theory"],function(e,s,i){var t=async.ref("polycade",{});t.entities=t.entites||{};var a=t.entities.base||{};return t.entities.base=i.base.mix(a,{prep:function(e){var i,a,n,r=void 0;if(this.options=e,this.vars={},i=this.options.sprite,a=this.options.body,n=this.options.ibody,i&&(this.sprite=this.phaser.add.sprite(this.options.sprite.position.x,this.options.sprite.position.y,this.options.sprite.source),this.position=this.sprite.position,i.anchor!==r&&(this.sprite.anchor=i.anchor),i.blendMode!==r&&(this.sprite.blendMode=i.blendMode),a&&(this.phaser.physics.enable(this.sprite,s.Physics.ARCADE),a.collideWorldBounds!==r&&(this.sprite.body.collideWorldBounds=a.collideWorldBounds),a.allowGravity!==r&&(this.sprite.body.allowGravity=a.allowGravity),a.immovable!==r&&(this.sprite.body.immovable=a.immovable)),n&&(n=_.clone(n),n.owner=this,this.sprite.ibody=t.imagination.body.create(n))),e.events)for(var o in e.events)this.sprite.events[o]&&this.sprite.events[o].add(e.events[o])},update:function(){return this.sprite&&this.sprite.ibody&&this.sprite.ibody.update(),this.trigger("update")},collide:function(e){return this.sprite&&this.sprite.ibody?this.sprite.ibody.collide(e):this.sprite?this.phaser.physics.arcade.collide(e,this.sprite):void 0}}),a}),async("polycade.entities.adornment",["jq","Phaser","theory"],function(e,s,i){var t=async.ref("polycade",{});t.entities=t.entites||{};var a=t.entities.adornment||{};return t.entities.adornment=i.base.mix(a,{prep:function(e){},update:function(){},collide:function(e){}}),a}),async.tmp.includes=["underscore","jq","theory","Phaser","verge"],async.tmp.managers=["polycade.events","polycade.layers","polycade.assets","polycade.entities.base"],async("polycade.game",async.tmp.includes,async.tmp.managers,function(e,s,i,t,a){var n=async.ref("polycade",{}),r=n.game||{};return n.game=i.base.mix(r,{name:"polycade.game",prep:function(e){return this.options=e,this.viewport={element:window},this.viewport.width=a.viewportW(),this.viewport.height=a.viewportH(),this.viewport.ratio=this.viewport.width/this.viewport.height,this.viewport.element.addEventListener("resize",function(){console.log("resize")}),this.events=n.manager("events").namespace("polycade").create(),this.layers=n.manager("layers").namespace("polycade").create(),this.assets=n.manager("assets").namespace("polycade").create(),this.entities={},this.entities.base=n.entities.base.namespace("polycade.game"),this.handlers=i.bindCollection(this.handlers),this.phaserHandlers=i.bindCollection(this.phaserHandlers),this.i={},this.i.container=s(this.options.container),this.phaser=new t.Game(100,100,t.AUTO,this.i.container[0],this.phaserHandlers,!0),this},handlers:{resize:function(){this.viewport.width=this.viewport.element.width(),this.viewport.height=this.viewport.element.height(),this.viewport.ratio=this.viewport.width/this.viewport.height,this.phaser.scale.setGameSize(this.viewport.width,this.viewport.height),this.phaser.world.setBounds(0,0,Math.max(this.viewport.width,this.dims.width),Math.min(this.viewport.height,this.dims.height))}},phaserHandlers:{preloads:function(){this.phaser.load.image("pic","assets/backgrounds/world-a/mountain-a.png"),this.phaser.load.image("plant","assets/entities/plant-a.png"),this.phaser.load.image("sky","assets/backgrounds/world-a/sky.jpg"),this.phaser.load.image("shadow","assets/effects/round-shadow.png")},creates:function(){this.entities.base.game=this,this.entities.base.phaser=this.phaser,this.phaser.physics.startSystem(t.Physics.ARCADE),this.bg=this.phaser.add.sprite(0,0,"sky"),this.bg.anchor={x:.5,y:0},this.bg.fixedToCamera=!1,this.plant=this.entities.base.create({sprite:{source:"plant",position:{x:300,y:300},anchor:{x:.5,y:1}},body:{collideWorldBounds:!1,immovable:!0,allowGravity:!1},_ibody:{container:this.imagination,source:"plant",debug:!0},events:{onAddedToGroup:function(){this.shadow=this.phaser.add.sprite(0,0,"shadow"),this.shadow.anchor={x:.4,y:.5},this.shadow.alpha=.2,this.shadow.scale.x=.3,this.shadow.scale.y=.2,this.shadow.baseAlpha=.3,this.sprite.bringToTop()},resize:function(){this.shadow.position.x=this.position.x,this.shadow.position.y=this.position.y}}})},updates:function(){},renders:function(){},resize:function(){console.log(this)}}}),n.game}),async("polycade.imagination.body",["jq","Phaser","theory","PolyK"],function(e,s,i,t){var a=async.ref("polycade",{});return a.imagination=a.imagination||{},a.imagination.body=i.base.mix(a.imagination.body||{},{prep:function(e){},collide:function(){}}),a.imagination.body}),async.registry("polycade",{src:{jq:{file:"node_modules/jqlite/jqlite.js",resolve:function(){return jqlite}},underscore:{file:"node_modules/underscore/underscore-min.js",resolve:function(){return _}},Phaser:{file:"node_modules/phaser/build/phaser.min.js",resolve:function(){return Phaser}},PolyK:{file:"vendor/polyk/polyk.js",resolve:function(){return PolyK}},verge:{file:"vendor/verge/verge.min.js",resolve:function(){return verge}},q:{resolve:function(){return async.promiser}},"polycade.events":{file:"src/managers/polycade.events.js",asynced:!0},"polycade.layers":{file:"src/managers/polycade.layers.js",asynced:!0},"polycade.assets":{file:"src/managers/polycade.assets.js",asynced:!0},"polycade.game":{file:"src/polycade.game.js",asynced:!0},"polycade.entities.base":{file:"src/polycade.entities.base.js",asynced:!0},"polycade.entities.adornment":{file:"src/polycade.entities.adornment.js",asynced:!0},"polycade.imagination.body":{file:"src/polycade.imagination.body.js",asynced:!0}},build:{jq:{file:"node_modules/jqlite/jqlite.min.js",resolve:function(){return jqlite}},underscore:{file:"node_modules/underscore/underscore-min.js",resolve:function(){return _}},Phaser:{file:"node_modules/phaser/build/phaser.min.js",resolve:function(){return Phaser}},PolyK:{file:"vendor/polyk/polyk.js",resolve:function(){return PolyK}},verge:{file:"vendor/verge/verge.min.js",resolve:function(){return verge}},q:{resolve:function(){return async.promiser}},"polycade.events":{asynced:!0},"polycade.layers":{asynced:!0},"polycade.assets":{asynced:!0},"polycade.game":{asynced:!0},"polycade.entities.base":{asynced:!0},"polycade.entities.adornment":{asynced:!0},"polycade.imagination.body":{asynced:!0}}}),async("polycade",["jq","theory","Phaser"],["polycade.game"],function(e,s,i){var t=async.ref("polycade",{});return t=s.base.mix(t,{manager:function(e){return t.managers[e]}})}),async("polycade.assets",["underscore","theory","Phaser","q"],function(e,s,i,t){var a=async.ref("polycade",{});return a.managers=a.managers||{},a.managers.assets=s.base.mix(a.managers.assets||{},{load:function(e){return Q.defer().promise}}),a.managers.assets}),async("polycade.events",["jq","theory","Phaser","theory.plugins.events"],function(e,s,i){var t=async.ref("polycade",{});return t.managers=t.managers||{},t.managers.events=function(e){return s.base.mix(s.plugins.events.create(),e||{},{})}(t.managers.events),t.managers.events}),async("polycade.layers",["jq","theory","Phaser"],function(e,s,i){var t=async.ref("polycade",{});return t.managers=t.managers||{},t.managers.layers=function(i){return s.base.mix(i||{},{name:"polycade.layers",prep:function(e){return this},createLayer:function(){return e("<div />")},resolveLayers:function(s){var i={};if(s)for(var t in s)i[t]=e(s[t]);return i}})}(t.managers.layers||{}),t.managers.layers});