async("theory.is",function(){var e=function(e){var n,r={array:function(e){return!(!e||!e.join)},arraylike:function(e){return!!(e&&e.length&&void 0!==e[0]||r.array(e)||r.arguments(e))},arguments:function(e){return!(!e||!r.number(e.length)||"[object Arguments]"!==Object.prototype.toString.call(e))},string:function(e){return!(void 0===e||!e.charAt)},number:function(e){return!!("number"==typeof e||e&&e.constructor===Number)},bool:function(e){return!!("boolean"==typeof e||e&&e.constructor===Boolean)},literalObject:function(e){return"object"==typeof e&&e.constructor===Object},object:function(e){return"object"==typeof e},callable:function(e){return!!(e&&e.call&&e.apply)},element:function(e){return!!e.getElementsByTagName},undefined:function(t){return t===e},defined:function(t){return t!==e},promise:function(e){return!!e&&!!e.then},null:function(e){return null===e},void:function(t){return"number"==typeof t&&isNaN(t)||t===e||null===t},NaN:function(e){return"number"==typeof e&&isNaN(e)},primitive:function(e){return"object"!=typeof e},primitiveObject:function(e){return"object"==typeof e&&!!e.valueOf&&"object"!=typeof e.valueOf()},hostname:function(e,t){!t&&(t=String(window.location.host)),!e&&(e=[]),r.string(e)&&(e=[e]);for(var n,i=e,o=0,a=i.length,s=t;o<a;o++)if((n=s.indexOf(i[o]))!=-1){if("."===i[o].charAt(0))return n===s.length-i[o].length;if(0===n)return!0}return!1},markupNormalized:function(e){return t.normalizeMarkup(e)===e},empty:function(e){if(!e)return!0;if(r.number(e.length))return!e.length;if(r.primitive(e))return!e;for(var t in e)if(!Object.prototype.hasOwnProperty||Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},towel:function(e){return 42===e}};r.not={};for(n in r)r.not[n]=function(e){return function(){return!e.apply(this,arguments)}}(r[n]);return r}(void 0);return e.what=function(t,n){if(n>0&&e.arraylike(t)){for(var r=[],i=0,o=n-1,a=t.length;i<a;i++)r.push(this.what(t[i],o));return"["+r.join(", ")+"]"}return e.what.type(t)},e.what.types=[{name:"string",cons:String},{name:"number",cons:Number},{name:"boolean",cons:Boolean},{name:"date",cons:Date},{name:"regexp",cons:RegExp},{name:"function",test:function(e,t,n){return n===Function||"function"===t||e.call&&!!e.apply}},{name:"callable",test:function(e,t,n){return e.call&&!!e.apply}},{name:"array",test:function(t,n,r){return r===Array||"array"===n||t.join&&t.slice&&!!t.unshift||t[0]&&void 0!==t.length||e.arguments(t)}},{name:"event",test:function(e,t,n){return!(!e.type||!e.target&&!e.srcElement)}},{name:"element",test:function(e,t,n){return!!e.getElementsByTagName}},{name:"document",test:function(e,t,n){return!!e.getElementById}},{name:"window",test:function(e,t,n){return e.location&&!!e.document}}],e.what.type=function(t,n){var r,i,o,a,s,l;if(t&&t.isWhatType)r=t.isWhatType();else if("undefined"!=(r=typeof t))for(o=t.constructor,a=e.what.types,s=a.length,i=0;i<s;i++)if((l=a[i])&&l.cons){if(o===l.cons){r=l.name;break}}else if(l&&l.test&&l.test(t,r,o)){r=l.name;break}if(n&&n.substr){if((s=arguments.length)>2){for(i=1;i<s;i++)if(r===arguments[i])return!0;return!1}return type===r}return r},e}),async("theory.has",function(){return{childFunctions:function(e){for(var t in e)if(e.hasOwnProperty(t)&&is.callable(e[t]))return!0;return!1},hasItems:function(){return!1}}}),async("theory.to",function(){return{array:function(e){if(e){if(Array.isArray){if(Array.isArray(e))return e}else if(e.join)return e;if(e&&void 0!==e.length)return Array.from?Array.from(e):Array.prototype.slice.call(e,0)}return arguments.length?[e]:[]},function:function(e){return e&&e.call&&e.apply?e:function(){return e}}}}),async("theory.run",["theory.is"],function(e){var t={internal:{cancel:function(){delete this.cancel,clearTimeout(0+this)}},later:function(n,r,i,o){e.number(r)||(o=i,i=r,r=0);var a=new Number(setTimeout(function(){n.apply(i||this,o||[])},r));return a.cancel=theory.bind(t.internal.cancel,a),a}};return t}),async("theory.base",["underscore"],function(e){var t=async.ref("theory",{});return t.base={mix:function(){var t=Array.prototype.slice.apply(arguments);t.splice(1,0,this);var n=e.extend.apply(e,t);return n.prepNS(),n},create:function(){var e=Object.create(this);return this.prep.apply(e,arguments),e},createNS:function(){var e=Object.create(this);return this.prepNS.apply(e,arguments),e},prep:function(){return this},prepNS:function(){return this.is={},this.shared={namespaces:{}},this},namespace:function(e){return this.shared.namespaces[e]||(this.shared.namespaces[e]=this.createNS(e))}},t.base}),async.registry("theory",{src:{"theory.plugins.array":{file:"src/plugins/theory.array.js",asynced:!0},"theory.plugins.events":{file:"src/plugins/theory.events.js",asynced:!0},"theory.plugins.transform":{file:"src/plugins/theory.transform.js",asynced:!0},"theory.plugins.creator":{file:"src/plugins/theory.creator.js",asynced:!0},"theory.plugins.broadcast":{file:"src/plugins/theory.broadcast.js",asynced:!0},"theory.plugins.expreg":{file:"src/plugins/theory.expreg.js",asynced:!0},"theory.is":{file:"src/theory.is.js",asynced:!0},"theory.has":{file:"src/theory.has.js",asynced:!0},"theory.to":{file:"src/theory.to.js",asynced:!0},"theory.base":{file:"src/theory.base.js",asynced:!0},"theory.run":{file:"src/theory.run.js",asynced:!0}},build:{"theory.plugins.array":{file:"build/plugins/theory.array.min.js",asynced:!0},"theory.plugins.events":{file:"build/plugins/theory.events.min.js",asynced:!0},"theory.plugins.transform":{file:"build/plugins/theory.transform.min.js",asynced:!0},"theory.plugins.creator":{file:"build/plugins/theory.creator.min.js",asynced:!0},"theory.plugins.broadcast":{file:"build/plugins/theory.broadcast.min.js",asynced:!0},"theory.plugins.expreg":{file:"build/plugins/theory.expreg.min.js",asynced:!0},"theory.is":{asynced:!0},"theory.has":{asynced:!0},"theory.to":{asynced:!0},"theory.base":{asynced:!0},"theory.run":{asynced:!0}}}),async("theory",["underscore"],["theory.is","theory.has","theory.to","theory.base","theory.run"],function(e,t,n,r,i,o){var a=async.ref("theory",{}),s=a;return a.plugins=a.plugins||{},a.global=this||function(){return this}(),a.undefined=void 0,a.extend=function(e,t,n){for(var r in t)void 0===e[r]||n&&n.overwrite?(n&&n.debug&&console.log(r),n&&n.each?e[r]=n.each(t[r],r):e[r]=t[r]):s.extend(e[r],t[r]);return e},a.extend(s,{log:function(e,t){t&&console.groupCollapsed(t),console.dir&&console.dir(e),t&&console.groupEnd()},define:function(e,t,n){return!!Object.defineProperty&&Object.defineProperty(e,t,n)},bind:function(e,t){var n=function(){return e.apply(t||this,arguments)};return n.bound=e,n},bindCollection:function(e,n,r){var i,o=r||{};for(i in e)e.hasOwnProperty?e.hasOwnProperty(i)&&t.callable(e[i])&&(o[i]=s.bind(e[i],n)):t.callable(e[i])&&(o[i]=s.bind(e[i],n));return o},bindCollectionRecursive:function(){},unbind:function(e){if(e.bound)return e.bound},promotePrimitive:function(e){var t=e;switch(typeof e){case"number":t=new Number(e);break;case"boolean":t=new Boolean(e);break;case"string":t=new String(e)}return t!==e&&(t.original=e),t},step:function(e){if(!e)return null;for(var t=1,n=arguments,r=n.length;e&&t<r;t++)e=e[n[t]];return e},timelimit:function(e,t,n){return function(){var r=n();return!e.lastCalled||r-e.lastCalled>t?(e.lastCalled=r,e.lastReturn=e.apply(this,arguments),e.lastReturn):e.lastReturn||null}},dereference:function(e,n){var r,i=this.dereference;if(t.object(e)){var o={};for(r in e)e[r]&&(o[r]=i.call(this,e[r]));return o}if(t.array(e)&&!e.ignoreDereference){for(o=[],r=0,l=e.length;r<l;r++)o[r]=e[r]?i.call(this,e[r]):e[r];return o}return t.callable(e)&&(o=function(){return e.apply(this,arguments)}),e},callableReference:function(e){return function(){return e}},error:function(e){throw e},wrapper:function(e,t,n){var r;return t&&t.join?r=t:t&&(r=[t]),e&&e.apply?e.apply(n||s.global,r||[{}]):null}}),a.method=function(e,n,r){var i,o,a=Array.prototype.slice;if(e.defaults&&(o=function(t){if(t=a.call(t,0),e.defaults.length)for(;t.length<=e.defaults.length;)t[t.length]=e.defaults[t.length];return t}),e.call?i=function(){var t=o?o(arguments):arguments;return e.call.apply(n||this,t)}:e.method?t.callable(e.method)&&(i=function(){var t=o?o(arguments):arguments;return e.method.apply(n||this,t)}):e.overloads&&(i=s.overload(e.overloads)),e.attributes&&(i=s.extend(i,e.attributes,{overwrite:!0})),!i)throw new Error("method failed creation. "+JSON.stringify(e));return i.clone=function(t){return s.method(e,t||n)},t.callable(e.after)&&e.after(e),i},a.clone=s.method({hint:"t.clone",defaults:[null,!1,0],required:[!0],method:function(e,n,r){t.void(e)&&(e=this);var i,o;if(!r||n&&n.call&&n.call(e,e,r)||n===!0||t.number(n)&&n<r)switch(!0){case t.element(e):o=e.cloneNode();break;case t.object(e):if(t.bool(e))o=new Boolean(e);else if(t.number(e))o=new Number(e);else if(t.string(e))o=new String(e);else{if(!t.literalObject(e)){try{console.warn("unable to clone",e)}catch(e){}throw new Error("unable to clone object, see console for details.")}o={}}for(i in e)Object.prototype.hasOwnProperty&&!Object.prototype.hasOwnProperty.call(e,i)||r<10&&(o[i]=s.clone(e[i],n,r+1));break;case t.array(e):for(o=[],i=0,l=e.length;i<l;i++)o.push(s.clone(e[i],n,r+1));break;default:o=e}else o=e;return o}}),a.borrow=s.wrapper(function(){var e={i:{all:null,src:null,dst:null,ctx:null,items:null},from:function(e){return this.i.src=arguments.length>1?arguments:[e],this},all:function(e){return this.i.all=!(arguments.length&&!e)&&1,this},allOwn:function(e){return this.i.all=!(arguments.length&&!e)&&2,this},preserveContext:function(){return this.i.ctx=!0,this},withContext:function(e){return this.i.ctx=e,this},giveTo:function(e,t){return this.i.dst=arguments.length>1?arguments:[e],this.apply(t),this},not:function(){return this},applyItem:function(e,t,n,r){if(r&&(n=r(e,t,n)),n&&n.bind&&(n=this.i.ctx?n.bind(this.i.ctx===!0?e:this.i.ctx):n),1==this.i.dst.length)this.i.dst[0][t]=n;else for(var i,o=this.i.dst,a=o.length,s=0;i=o[s],s<a;s++)i[t]=n},apply:function(e){var t,n,r,i,o,a,s,l,u;if(this.i.all)for(n=this.i.src,i=n.length,r=0;t=n[r],r<i;r++)for(a in t)(1===this.i.all||Object.prototype.hasOwnProperty.call(t,a))&&(u=t[a])&&this.applyItem(t,a,u,e);else if(this.i.items)for(n=this.i.items,i=n.length,r=0;t=n[r],r<i;r++)for(a=this.i.src,l=a.length,s=0;o=a[s],s<l;s++)(u=o[t])&&this.applyItem(o,t,u,e);return this}};return function(t){var n=Object.create(e);return n.i=s.dereference(n.i),n.i.items=t&&t.join?t:arguments,n}}),a});