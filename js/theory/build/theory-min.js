async("theory.is",function(){var e=function(e){var r,n={array:function(e){return!(!e||!e.join)},arraylike:function(e){return!!(e&&e.length&&void 0!==e[0]||n.array(e)||n.arguments(e))},arguments:function(e){return!(!e||!n.number(e.length)||"[object Arguments]"!==Object.prototype.toString.call(e))},string:function(e){return!(void 0===e||!e.charAt)},number:function(e){return!!("number"==typeof e||e&&e.constructor===Number)},bool:function(e){return!!("boolean"==typeof e||e&&e.constructor===Boolean)},literalObject:function(e){return"object"==typeof e&&e.constructor===Object},object:function(e){return"object"==typeof e},callable:function(e){return!!(e&&e.call&&e.apply)},element:function(e){return!!e.getElementsByTagName},undefined:function(t){return t===e},defined:function(t){return t!==e},promise:function(e){return!!e&&!!e.then},null:function(e){return null===e},void:function(t){return"number"==typeof t&&isNaN(t)||t===e||null===t},NaN:function(e){return"number"==typeof e&&isNaN(e)},primitive:function(e){return"object"!=typeof e},primitiveObject:function(e){return"object"==typeof e&&!!e.valueOf&&"object"!=typeof e.valueOf()},hostname:function(e,t){!t&&(t=String(window.location.host)),!e&&(e=[]),n.string(e)&&(e=[e]);for(var r,i=e,o=0,a=i.length,l=t;o<a;o++)if((r=l.indexOf(i[o]))!=-1){if("."===i[o].charAt(0))return r===l.length-i[o].length;if(0===r)return!0}return!1},markupNormalized:function(e){return t.normalizeMarkup(e)===e},empty:function(e){if(!e)return!0;if(n.number(e.length))return!e.length;if(n.primitive(e))return!e;for(var t in e)if(!Object.prototype.hasOwnProperty||Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},towel:function(e){return 42===e},matchingType:function(e,t){return Object.getPrototypeOf?Object.getPrototypeOf(e)===Object.getPrototypeOf(t):e.__proto__?e.__proto__===t.__proto__:n.what.type(e)===n.what.type(t)}};n.not={};for(r in n)n.not[r]=function(e){return function(){return!e.apply(this,arguments)}}(n[r]);return n}(void 0);return e.what=function(t,r){if(r>0&&e.arraylike(t)){for(var n=[],i=0,o=r-1,a=t.length;i<a;i++)n.push(this.what(t[i],o));return"["+n.join(", ")+"]"}return e.what.type(t)},e.what.types=[{name:"string",cons:String},{name:"number",cons:Number},{name:"boolean",cons:Boolean},{name:"date",cons:Date},{name:"regexp",cons:RegExp},{name:"function",test:function(e,t,r){return r===Function||"function"===t||e.call&&!!e.apply}},{name:"callable",test:function(e,t,r){return e.call&&!!e.apply}},{name:"array",test:function(t,r,n){return n===Array||"array"===r||t.join&&t.slice&&!!t.unshift||t[0]&&void 0!==t.length||e.arguments(t)}},{name:"event",test:function(e,t,r){return!(!e.type||!e.target&&!e.srcElement)}},{name:"element",test:function(e,t,r){return!!e.getElementsByTagName}},{name:"document",test:function(e,t,r){return!!e.getElementById}},{name:"window",test:function(e,t,r){return e.location&&!!e.document}}],e.what.type=function(t,r){var n,i,o,a,l,s;if(t&&t.isWhatType)n=t.isWhatType();else if("undefined"!=(n=typeof t))for(o=t.constructor,a=e.what.types,l=a.length,i=0;i<l;i++)if((s=a[i])&&s.cons){if(o===s.cons){n=s.name;break}}else if(s&&s.test&&s.test(t,n,o)){n=s.name;break}if(r&&r.substr){if((l=arguments.length)>2){for(i=1;i<l;i++)if(n===arguments[i])return!0;return!1}return type===n}return n},e}),async("theory.has",function(){return{childFunctions:function(e){for(var t in e)if(e.hasOwnProperty(t)&&is.callable(e[t]))return!0;return!1},hasItems:function(){return!1}}}),async("theory.to",function(){return{array:function(e){if(e){if(Array.isArray){if(Array.isArray(e))return e}else if(e.join)return e;if(e&&void 0!==e.length)return Array.from?Array.from(e):Array.prototype.slice.call(e,0)}return arguments.length?[e]:[]},function:function(e){return e&&e.call&&e.apply?e:function(){return e}}}}),async("theory.run",["theory.is"],function(e){var t={internal:{cancel:function(){delete this.cancel,clearTimeout(0+this)}},later:function(r,n,i,o){e.number(n)||(o=i,i=n,n=0);var a=new Number(setTimeout(function(){r.apply(i||this,o||[])},n));return a.cancel=theory.bind(t.internal.cancel,a),a}};return t}),async("theory.base",["underscore"],function(e){var t=async.ref("theory",{});return t.base={mix:function(){var t=Array.prototype.slice.apply(arguments);!t[0]&&(t[0]={}),t.splice(1,0,this);var r=e.extend.apply(e,t);return r.prepNS(),r},create:function(){var e=Object.create(this),t=this.prep.apply(e,arguments);return t?t:e},createNS:function(){var e=Object.create(this);return this.prepNS.apply(e,arguments),e},prep:function(){return this},prepNS:function(){return this.shared={namespaces:{}},this},namespace:function(t,r){var n;return e.isString(t)?n=this.shared.namespaces[t]||(this.shared.namespaces[t]=this.createNS()):(n=this.createNS(),r=t),r?e.extend(n,r):n}},t.base}),async.registry("theory",{src:{"theory.plugins.array":{file:"src/plugins/theory.array.js",asynced:!0},"theory.plugins.events":{file:"src/plugins/theory.events.js",asynced:!0},"theory.plugins.transform":{file:"src/plugins/theory.transform.js",asynced:!0},"theory.plugins.creator":{file:"src/plugins/theory.creator.js",asynced:!0},"theory.plugins.broadcast":{file:"src/plugins/theory.broadcast.js",asynced:!0},"theory.plugins.expreg":{file:"src/plugins/theory.expreg.js",asynced:!0},"theory.is":{file:"src/theory.is.js",asynced:!0},"theory.has":{file:"src/theory.has.js",asynced:!0},"theory.to":{file:"src/theory.to.js",asynced:!0},"theory.base":{file:"src/theory.base.js",asynced:!0},"theory.run":{file:"src/theory.run.js",asynced:!0}},build:{"theory.plugins.array":{file:"build/plugins/theory.array.min.js",asynced:!0},"theory.plugins.events":{file:"build/plugins/theory.events.min.js",asynced:!0},"theory.plugins.transform":{file:"build/plugins/theory.transform.min.js",asynced:!0},"theory.plugins.creator":{file:"build/plugins/theory.creator.min.js",asynced:!0},"theory.plugins.broadcast":{file:"build/plugins/theory.broadcast.min.js",asynced:!0},"theory.plugins.expreg":{file:"build/plugins/theory.expreg.min.js",asynced:!0},"theory.is":{asynced:!0},"theory.has":{asynced:!0},"theory.to":{asynced:!0},"theory.base":{asynced:!0},"theory.run":{asynced:!0}}}),async("theory",["underscore"],["theory.is","theory.has","theory.to","theory.base","theory.run"],function(e,t,r,n,i,o){var a=async.ref("theory",{}),s=a;return a.plugins=a.plugins||{},a.global=this||function(){return this}(),a.undefined=void 0,a.extend=function(e,t,r){for(var n in t)void 0===e[n]||r&&r.overwrite?(r&&r.debug&&console.log(n),r&&r.each?e[n]=r.each(t[n],n):e[n]=t[n]):s.extend(e[n],t[n]);return e},a.extend(s,{log:function(e,t){t&&console.groupCollapsed(t),console.dir&&console.dir(e),t&&console.groupEnd()},define:function(e,t,r){return!!Object.defineProperty&&Object.defineProperty(e,t,r)},bind:function(e,t){var r=function(){return e.apply(t||this,arguments)};return r.bound=e,r},bindCollection:function(e,r,n){var i,o=n||{};for(i in e)e.hasOwnProperty?e.hasOwnProperty(i)&&t.callable(e[i])&&(o[i]=s.bind(e[i],r)):t.callable(e[i])&&(o[i]=s.bind(e[i],r));return o},bindCollectionRecursive:function(){},unbind:function(e){if(e.bound)return e.bound},promotePrimitive:function(e){var t=e;switch(typeof e){case"number":t=new Number(e);break;case"boolean":t=new Boolean(e);break;case"string":t=new String(e)}return t!==e&&(t.original=e),t},step:function(e){if(!e)return null;for(var t=1,r=arguments,n=r.length;e&&t<n;t++)e=e[r[t]];return e},timelimit:function(e,t,r){return function(){var n=r();return!e.lastCalled||n-e.lastCalled>t?(e.lastCalled=n,e.lastReturn=e.apply(this,arguments),e.lastReturn):e.lastReturn||null}},callableReference:function(e){return function(){return e}},error:function(e){throw e},wrapper:function(e,t,r){var n;return t&&t.join?n=t:t&&(n=[t]),e&&e.apply?e.apply(r||s.global,n||[{}]):null}}),a.method=function(e,r,n){var i,o,a=Array.prototype.slice;if(e.defaults&&(o=function(t){if(t=a.call(t,0),e.defaults.length)for(;t.length<=e.defaults.length;)t[t.length]=e.defaults[t.length];return t}),e.call?i=function(){var t=o?o(arguments):arguments;return e.call.apply(r||this,t)}:e.method?t.callable(e.method)&&(i=function(){var t=o?o(arguments):arguments;return e.method.apply(r||this,t)}):e.overloads&&(i=s.overload(e.overloads)),(e.attributes||n)&&(i=s.extend(i,e.attributes||n,{overwrite:!0})),!i)throw new Error("method failed creation. "+JSON.stringify(e));return i.clone=function(t){return s.method(e,t||r)},t.callable(e.after)&&e.after(e),i},a.dereference=function(e,r,n){var i,o;if(r||(r={deep:!0}),r.lookup===!0&&(r.lookup={list:[],refs:[]}),r.lookup){if((o=r.lookup.list.indexOf(e))!==-1)return r.lookup.refs[o];r.lookup.list.push(e)}if(n||(n=[]),r.types)i=t.what.type(e),r.types[i]&&(e=r.types[i].call(this,e,r,n));else if(t.array(e))e=this.dereference.handlers.array.call(this,e,r,n);else if(t.object(e))e=this.dereference.handlers.object.call(this,e,r,n);else{if(!t.callable(e))throw new Error("unable to dereference",n);e=this.dereference.handlers.callable.call(this,e,r,n)}return r.lookup&&(r.lookup.refs[r.lookup.list.length-1]=e),e},a.dereference.handlers={object:function(e,r,n){var i,o;if(t.string(e))return new String(e);o=t.element(e)?e.cloneNode():t.bool(e)?new Boolean(e):t.number(e)?new Number(e):{};for(i in e)o[i]=r.deep&&e[i]?this.dereference.call(this,e[i],r,n.concat(i)):e[i];return o},array:function(e,t,r){for(var n=[],i=0,o=e.length;i<o;i++)n[i]=t.deep&&e[i]?this.dereference.call(this,e[i],t,r.concat(i)):e[i];return n},callable:function(e,t,r){return function(){return e.apply(this,arguments)}}},a.clone=s.method({hint:"t.clone",defaults:[null,!1,0],required:[!0],method:function(e,r,n){t.void(e)&&(e=this);var i,o;if(!n||r&&r.call&&r.call(e,e,n)||r===!0||t.number(r)&&r<n)switch(!0){case t.element(e):o=e.cloneNode();break;case t.object(e):if(t.bool(e))o=new Boolean(e);else if(t.number(e))o=new Number(e);else if(t.string(e))o=new String(e);else{if(!t.literalObject(e)){try{console.warn("unable to clone",e)}catch(e){}throw new Error("unable to clone object, see console for details.")}o={}}for(i in e)Object.prototype.hasOwnProperty&&!Object.prototype.hasOwnProperty.call(e,i)||n<10&&(o[i]=s.clone(e[i],r,n+1));break;case t.array(e):for(o=[],i=0,l=e.length;i<l;i++)o.push(s.clone(e[i],r,n+1));break;default:o=e}else o=e;return o}}),a.borrow=s.wrapper(function(){var e={i:{all:null,src:null,dst:null,ctx:null,items:null},from:function(e){return this.i.src=arguments.length>1?arguments:[e],this},all:function(e){return this.i.all=!(arguments.length&&!e)&&1,this},allOwn:function(e){return this.i.all=!(arguments.length&&!e)&&2,this},preserveContext:function(){return this.i.ctx=!0,this},withContext:function(e){return this.i.ctx=e,this},giveTo:function(e,t){return this.i.dst=arguments.length>1?arguments:[e],this.apply(t),this},not:function(){return this},applyItem:function(e,t,r,n){if(n&&(r=n(e,t,r)),r&&r.bind&&(r=this.i.ctx?r.bind(this.i.ctx===!0?e:this.i.ctx):r),1==this.i.dst.length)this.i.dst[0][t]=r;else for(var i,o=this.i.dst,a=o.length,l=0;i=o[l],l<a;l++)i[t]=r},apply:function(e){var t,r,n,i,o,a,l,s,u;if(this.i.all)for(r=this.i.src,i=r.length,n=0;t=r[n],n<i;n++)for(a in t)(1===this.i.all||Object.prototype.hasOwnProperty.call(t,a))&&(u=t[a])&&this.applyItem(t,a,u,e);else if(this.i.items)for(r=this.i.items,i=r.length,n=0;t=r[n],n<i;n++)for(a=this.i.src,s=a.length,l=0;o=a[l],l<s;l++)(u=o[t])&&this.applyItem(o,t,u,e);return this}};return function(t){var r=Object.create(e);return r.i=s.dereference(r.i),r.i.items=t&&t.join?t:arguments,r}}),a.guid=function(){return""+(65536*(1+Math.random())|0).toString(16).substring(1)+(65536*(1+Math.random())|0).toString(16).substring(1)+(65536*(1+Math.random())|0).toString(16).substring(1)+(65536*(1+Math.random())|0).toString(16).substring(1)},a.merge=function(e,r,n,i,o){console.log(arguments);var a;if(!o){if(n||(n={}),n.dereference&&!n._dereference&&(n._dereference={lookup:!0},e=this.dereference(e,n._dereference),r=this.dereference(r,n._dereference)),t.arraylike(r)){for(var l=0,s=r.length;l<s;l++)e=this.merge(e,r[l],n);return e}o=[],i=n.fast?null:{a:[],b:[]}}if(null!==i)if((a=i.a.indexOf(e))!=-1)if(i.b[a]){if(i.b[a].list.indexOf(r)!=-1)return e;i.b[a].push(r)}else i.b[a]=[r];else i.a.push(e);return e=t.matchingType(e,r)?t.arraylike(r)?this.mergeArray.call(this,e,r,n,i,o):t.object(r)?this.mergeObject.call(this,e,r,n,i,o):r:t.arraylike(r)&&t.object(r[key])?this.mergeObject.call(this,e,r,n,i,o):r,!o&&i&&(i.a.length=0,i.b.length=0,i=null),e},a.mergeArray=function(e,t,r,n,i){if(r.arrayConcat)e.concat(t);else for(var o=0,a=t.length;o<a;o++)e[o]=this.merge(e[o],t[o],r,n,i.concat([o]));return e},a.mergeObject=function(e,r,n,i,o){for(var a in r)!t.defined(e[a])||n.overwrite?e[a]=r[a]:t.object(r[a])&&t.object(e[a])?e[a]=this.merge(e[a],r[a],n,i,o.concat([a])):e[a]=r[a];return e},a.mergeAndClone=function(e,t,r){return this.merge(e,t,s.extend({dereference:!0},r))},a});