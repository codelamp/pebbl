async("theory.plugins.transform",["theory"],function(t){t=t||{};t.plugins=t.plugins||{},t.plugins.transform={create:function(){return this.prep.apply(Object.create(this),arguments)},prep:function(){return this.reset(),this},reset:function(){return this.m=[1,0,0,1,0,0],this},multiply:function(t){var i=this.m[0]*t.m[0]+this.m[2]*t.m[1],s=this.m[1]*t.m[0]+this.m[3]*t.m[1],h=this.m[0]*t.m[2]+this.m[2]*t.m[3],m=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],n=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=s,this.m[2]=h,this.m[3]=m,this.m[4]=r,this.m[5]=n,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,s=-this.m[1]*t,h=-this.m[2]*t,m=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),n=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=s,this.m[2]=h,this.m[3]=m,this.m[4]=r,this.m[5]=n,this},rotate:function(t){return this.rotateRad(Math.PI/180*t)},rotateRad:function(t){var i=Math.cos(t),s=Math.sin(t),h=this.m[0]*i+this.m[2]*s,m=this.m[1]*i+this.m[3]*s,r=this.m[0]*-s+this.m[2]*i,n=this.m[1]*-s+this.m[3]*i;return this.m[0]=h,this.m[1]=m,this.m[2]=r,this.m[3]=n,this},translate:function(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this},scale:function(t,i){return i=i||t,this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this},transformPoint:function(t,i,s){var h=t,m=i;return t=h*this.m[0]+m*this.m[2]+this.m[4],i=h*this.m[1]+m*this.m[3]+this.m[5],"array"===s?[t,i]:{x:t,y:i}}}});