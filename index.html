<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pebbl â€” v0.4</title>
<link type="text/css" rel="stylesheet" href="scripts/jquery.qtip.css" />
<link type="text/css" rel="stylesheet" href="styles/core.css" />
<meta property="og:title" content="Pebbl v0.4" />
<meta property="og:image" content="http://pebbl.co.uk/v0.3/site/ad.png" />
<meta property="og:description" content="This is just a demo screen of Pebbl to test the game engine (powered by Phaser &amp; Pixi js)"/>
<meta property="og:url" content="http://pebbl.co.uk/v0.4/index.html" />
</head>
<body>
<div id="log"></div>
<div id="talkies"></div>
<script type="text/javascript" src="js/async/build/async.js" charset="utf-8"></script>
<script>
async.registry({
  'jq':         { path: 'js/polycade/node_modules/jqlite/jqlite.js', resolve: function(){ return jqlite; } },
  'underscore': { path: 'js/vendor/underscore.js',                   resolve: function(){ return _; } },
  'Phaser':     { path: 'js/vendor/phaser-ce/build/phaser.min.js',   resolve: function(){ return Phaser; } },
  'PolyK':      { path: 'js/vendor/polyk.js',                        resolve: function(){ return PolyK; } },
  'Q':          { resolve: function(){ return async.Q; } },
  'theory': {
    path: 'js/theory/src/theory._.js',
    base: 'js/theory/src/',
    asynced: true
  },
  'polycade': {
    path: 'js/polycade/src/polycade._.js',
    base: 'js/polycade/src/',
    asynced: true
  },
  'game': {
    path: 'js/game.js',
    asynced: true
  }
});

async('init', ['game'])
  .spread(function(game){
    console.log('GAME HAS FULLY LOADED!');
    game.init();
  })
  .fail(function(ex){
    console.log(ex);
  })
;
</script>
<script>



/*
var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { create: create, update: update, preload: preload });

function preload() {

    game.load.image('pic', 'assets/backgrounds/world-a/mountain-a.png');

}

var sprite;

function create() {

    //  Create a BitmapData
    var bmd = game.make.bitmapData(320, 256);

    //  Draw an image to it
    bmd.copy('pic');

    //  Draw a few random shapes to it
    //bmd.circle(100, 100, 32, 'rgba(255,0,0,0.8)');
    //bmd.rect(110, 40, 64, 120, 'rgba(255,0,255,0.8)');

    //  Here the sprite uses the BitmapData as a texture
    sprite = game.add.sprite(300, 300, bmd);

    sprite.anchor.set(0.5);

    //  And you can do Spritey things with it as usual

}

function update() {

    sprite.rotation += 0.01;

}
*/
/*
var game = new Phaser.Game(800, 600, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update });

function preload() {

    game.load.image('phaser', 'assets/sprites/phaser-dude.png');
    game.load.spritesheet('veggies', 'assets/sprites/fruitnveg32wh37.png', 32, 32);

}

var sprite;
var group;
var cursors;

function create() {

    game.physics.startSystem(Phaser.Physics.ARCADE);

    game.stage.backgroundColor = '#2d2d2d';

    sprite = game.add.sprite(32, 200, 'phaser');

    game.physics.arcade.enable(sprite);

    group = game.add.physicsGroup();

    for (var i = 0; i < 50; i++)
    {
        var c = group.create(game.rnd.between(100, 770), game.rnd.between(0, 570), 'veggies', game.rnd.between(0, 35));
        c.body.mass = -100;
    }

    for (var i = 0; i < 20; i++)
    {
        var c = group.create(game.rnd.between(100, 770), game.rnd.between(0, 570), 'veggies', 17);
    }

    cursors = game.input.keyboard.createCursorKeys();

}

function update() {

    if (game.physics.arcade.collide(sprite, group, collisionHandler, processHandler, this))
    {
        console.log('boom');
    }

    // game.physics.arcade.overlap(sprite, group, collisionHandler, null, this);

    sprite.body.velocity.x = 0;
    sprite.body.velocity.y = 0;

    if (cursors.left.isDown)
    {
        sprite.body.velocity.x = -200;
    }
    else if (cursors.right.isDown)
    {
        sprite.body.velocity.x = 200;
    }

    if (cursors.up.isDown)
    {
        sprite.body.velocity.y = -200;
    }
    else if (cursors.down.isDown)
    {
        sprite.body.velocity.y = 200;
    }

}

function processHandler (player, veg) {

    return true;

}

function collisionHandler (player, veg) {

    if (veg.frame == 17)
    {
        veg.kill();
    }

}
*/

</script>
</body>
</html>